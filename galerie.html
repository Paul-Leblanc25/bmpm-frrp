<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Galerie — BMPM</title>
  <style>
    :root {
      --bg1: #0b0b0b; --bg2: #121212; --gold: #d4af37; --white: #ffffff;
      --glass: rgba(255,255,255,0.08); --glass-strong: rgba(255,255,255,0.14);
      --text: #f2f2f2; --muted: #cfcfcf;
    }
    *{box-sizing:border-box}
    html, body { margin:0; padding:0; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color: var(--text);
      background: radial-gradient(1000px 400px at 20% 10%, #1b1b1b 10%, var(--bg1) 40%, var(--bg2) 100%);
      min-height:100vh; }
    a { color: var(--text); text-decoration: none }
    img { display:block; max-width:100%; height:auto }

    /* Header (identique aux autres onglets) */
    .mpm-header { position: sticky; top:0; z-index: 50; background: var(--glass); backdrop-filter: blur(8px); border-bottom: 1px solid rgba(212,175,55,0.25); }
    .wrap { max-width: 1200px; margin: 0 auto; padding: 14px 20px; display:flex; align-items:center; gap: 16px; }
    .mpm-left, .mpm-center, .mpm-right { display:flex; align-items:center; gap:10px; }
    .mpm-left { flex:1 }
    .mpm-center { justify-content:center }
    .mpm-right { gap:12px }
    .mpm-left span { font-weight:600; letter-spacing:0.2px; text-shadow: 0 0 6px rgba(255,255,255,0.08); }
    .mpm-logo { width:60px; height:60px; border-radius:8px; box-shadow: none; }
    .mpm-main-logo { width:46px; height:auto; border-radius:10px; box-shadow: none; }
    .social a { border-radius:8px; overflow:hidden; display:inline-block }
    .social img { width:32px; height:32px }

    /* Nav */
    nav.mpm-nav { background: var(--glass-strong); backdrop-filter: blur(6px); border-bottom: 1px solid rgba(212,175,55,0.2); }
    nav.mpm-nav ul { list-style:none; margin:0; padding:0; display:flex; gap:18px; align-items:center; max-width:1200px; margin-inline:auto; padding: 10px 20px; }
    nav.mpm-nav > ul > li > a { padding:8px 12px; border-radius:8px; }
    nav.mpm-nav > ul > li > a:hover { background: rgba(212,175,55,0.12); }

    /* Banner */
    .top-banner { max-width: 1200px; margin: 24px auto; height: 420px; border: 1px solid rgba(212,175,55,0.25); border-radius:14px; overflow:hidden;
      background:
        radial-gradient(600px 280px at 70% 30%, rgba(212,175,55,0.25), transparent 60%),
        linear-gradient(135deg, rgba(212,175,55,0.12), rgba(255,255,255,0.04) 60%),
        repeating-linear-gradient(45deg, rgba(255,255,255,0.06) 0 6px, rgba(255,255,255,0.02) 6px 12px),
        url('https://i.postimg.cc/Vs40wK6X/couv-BMPM-5895599a-7984-434e-ba35-8822396475db-1.webp');
      background-size: cover; background-position: center 52%; background-repeat: no-repeat; }

    /* Section */
    .section{max-width:1200px;margin:24px auto;padding:24px;background:var(--glass);border:1px solid rgba(212,175,55,0.25);border-radius:16px}
    .section h1{margin:0 0 12px;font-size:clamp(24px,4vw,36px);color:var(--white)}
    .section p{color:var(--muted);line-height:1.6}

    /* Filtres & grille */
    .filters{display:flex;gap:8px;margin-top:6px}
    .chip{padding:8px 12px;border-radius:999px;border:1px solid rgba(212,175,55,0.35);background:linear-gradient(180deg, rgba(212,175,55,0.22), rgba(212,175,55,0.1));color:var(--white);cursor:pointer}
    .chip[aria-selected="true"]{background:rgba(212,175,55,0.35)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px;margin-top:16px}
    .card{position:relative;border-radius:14px;overflow:hidden;border:1px solid rgba(212,175,55,0.25);background:rgba(255,255,255,0.04);
      transition: border-color 160ms ease, box-shadow 160ms ease, transform 160ms ease}
    .card .thumb{aspect-ratio:16/9;background:#111;background-size:cover;background-position:center;
      transition: transform 220ms ease, filter 220ms ease; will-change: transform}
    .card:hover{transform: translateY(-2px); box-shadow: 0 12px 24px rgba(0,0,0,0.35); border-color: rgba(212,175,55,0.45)}
    .card:hover .thumb{transform: scale(1.03); filter: brightness(1.05) saturate(1.05)}
    .card:focus-within{transform: translateY(-2px); box-shadow: 0 12px 24px rgba(0,0,0,0.35); border-color: rgba(212,175,55,0.45)}
    .card .content{padding:10px}
    .card .title{font-weight:600}
    .badge{position:absolute;top:8px;left:8px;background:rgba(212,175,55,0.8);color:#151515;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:700}
    /* Respecte les préférences utilisateur pour réduire les animations */
    @media (prefers-reduced-motion: reduce){
      .card, .card .thumb{transition: none}
      .card:hover, .card:focus-within{transform:none; box-shadow:none}
      .card:hover .thumb{transform:none; filter:none}
    }

    /* Boutons génériques */
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:1px solid rgba(212,175,55,0.35);background:linear-gradient(180deg, rgba(212,175,55,0.22), rgba(212,175,55,0.1));color:var(--white);cursor:pointer}
    
    /* Footer */
    footer{margin-top:32px;padding:24px;background:rgba(30,30,30,0.9);border-top:1px solid rgba(212,175,55,0.25);color:var(--muted)}
    footer .wrap{flex-wrap:wrap;justify-content:space-between}
    footer a{color:var(--muted)}
    
    /* Responsive */
    @media (max-width: 1024px){
      .wrap{padding:12px 16px}
      nav.mpm-nav ul{gap:14px}
      .top-banner{height:360px}
      .grid{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}
    }
    @media (max-width: 768px){
      .wrap{flex-wrap:wrap;gap:12px}
      .mpm-left,.mpm-center,.mpm-right{width:100%;justify-content:center}
      .mpm-left{order:1} .mpm-center{order:2} .mpm-right{order:3}
      nav.mpm-nav ul{flex-wrap:wrap;justify-content:center;gap:12px;padding:8px 16px}
      .top-banner{height:260px;margin:16px auto}
      .grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
      .admin .row{gap:8px}
      .btn{padding:12px 16px}
    }
    @media (max-width: 480px){
      .wrap{padding:10px 12px}
      nav.mpm-nav ul{gap:10px;padding:8px 12px}
      .top-banner{height:180px}
    }
  </style>
</head>
<body>
  <header class="mpm-header">
    <div class="wrap">
      <div class="mpm-left">
        <a href="accueil.html"><img class="mpm-logo" src="https://i.postimg.cc/QNyHFRJq/Logo-BMPM.jpg" alt="Logo BMPM"></a>
        <span>Marins-Pompiers de Marseille</span>
      </div>
      <div class="mpm-center">
        <a href="accueil.html"><img class="mpm-main-logo" src="https://i.postimg.cc/JzG0V9nM/Logo-18-112.png" alt="Logo 18 112"></a>
      </div>
      <div class="mpm-right social">
        <a href="https://www.facebook.com/BataillonMarinsPompiersMarseille" target="_blank" rel="noopener noreferrer"><img src="https://i.postimg.cc/d0BnK8Ts/telechargement-1.png" alt="Facebook"></a>
        <a href="https://www.instagram.com/marinspompiers/" target="_blank" rel="noopener noreferrer"><img src="https://i.postimg.cc/fbRVtZpK/10900021.png" alt="Instagram"></a>
        <a href="https://x.com/marinspompiers" target="_blank" rel="noopener noreferrer"><img src="https://i.postimg.cc/htq4xgzb/nouvelle-conception-icone-x-du-logo-twitter-2023-1017-45418.avif" alt="X"></a>
        <a href="https://discord.gg/23hbfxa4Gb" target="_blank" rel="noopener noreferrer"><img src="https://i.postimg.cc/tRhd0dQn/discord-logo-discord-logo-transparent-discord-icon-transparent-free-free-png.webp" alt="Discord"></a>
      </div>
    </div>
  </header>

  <nav class="mpm-nav">
    <ul>
      <li><a href="accueil.html">Accueil</a></li>
      <li><a href="recrutement.html">Recrutement</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="galerie.html">Galerie</a></li>
      <li><a href="effectif.html">Effectif</a></li>
    </ul>
  </nav>


  <div class="top-banner" aria-hidden="true"></div>

  <section class="section">
    <h1>Galerie</h1>
    <p>Photos d’interventions, vidéos de démonstration, et flotte de véhicules. Admins peuvent ajouter des éléments avec le <strong>code secret</strong>.</p>

    <div class="filters" role="tablist" aria-label="Filtres de la galerie">
      <button class="chip" role="tab" aria-selected="true" data-filter="photo">Photos</button>
      <button class="chip" role="tab" aria-selected="false" data-filter="video">Vidéos</button>
    </div>

    <div class="grid" id="galleryGrid" aria-live="polite"></div>

    

    
  </section>

  <footer>
    <div class="wrap">
      <div>© 2025 BMPM - FRRP | Tous droits réservés | Site fictif à but rôleplay - non affilié au BMPM officiel | site créé par Asuna</div>
      <div><a href="#">Accessibilité</a> · <a href="#">Plan du site</a> · <a href="#">Cookies</a></div>
    </div>
  </footer>

  <script>
    const LS_KEY = 'bmpm_gallery_items_v1';
    const SEED_PHOTO_URL = 'https://i.postimg.cc/cCqWGy3g/2023-MBMP-218-A-001-035.jpg';
    let items = [];
    let currentFilter = 'photo';

    function loadItems(){
      try{ items = JSON.parse(localStorage.getItem(LS_KEY) || '[]') || []; }
      catch(e){ items = []; }
    }
    function saveItems(){ localStorage.setItem(LS_KEY, JSON.stringify(items)); }

    function ensureSeedItem(){
      try{
        const exists = items.some(it => it.type === 'photo' && (it.url === SEED_PHOTO_URL || it.thumb === SEED_PHOTO_URL));
        if(!exists){
          items.push({ id: Date.now(), type: 'photo', title: 'BMPM 2023', url: SEED_PHOTO_URL, thumb: SEED_PHOTO_URL, createdAt: new Date().toISOString() });
          saveItems();
        }
      }catch(e){ /* pass */ }
    }

    // S'assure que la photo seed porte bien le titre demandé
    function ensureSeedTitle(){
      try{
        let changed = false;
        for(const it of items){
          if(it.type === 'photo' && (it.url === SEED_PHOTO_URL || it.thumb === SEED_PHOTO_URL)){
            if(it.title !== 'BMPM 2023'){
              it.title = 'BMPM 2023';
              changed = true;
            }
          }
        }
        if(changed) saveItems();
      }catch(e){ /* pass */ }
    }

    function toEmbedUrl(url){
      if(!url) return '';
      try{
        const u = new URL(url);
        if(u.hostname.includes('youtube.com')){
          const v = u.searchParams.get('v');
          return v ? `https://www.youtube.com/embed/${v}` : url;
        }
        if(u.hostname.includes('youtu.be')){
          const id = u.pathname.slice(1);
          return `https://www.youtube.com/embed/${id}`;
        }
      }catch(e){ /* pass */ }
      return url;
    }

    function render(){
      const grid = document.getElementById('galleryGrid');
      grid.innerHTML = '';
      const filtered = items.filter(it => it.type === currentFilter);
      for(const it of filtered){
        const card = document.createElement('div');
        card.className = 'card';

        const badge = document.createElement('div');
        badge.className = 'badge';
        badge.textContent = it.type === 'vehicule' ? 'VÉHICULE' : (it.type === 'video' ? 'VIDÉO' : 'PHOTO');
        card.appendChild(badge);

        if(it.type === 'video'){
          const iframe = document.createElement('iframe');
          iframe.className = 'thumb';
          iframe.src = toEmbedUrl(it.url);
          iframe.title = it.title || 'Vidéo';
          iframe.frameBorder = '0';
          iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share';
          iframe.allowFullscreen = true;
          card.appendChild(iframe);
        } else {
          const div = document.createElement('div');
          div.className = 'thumb';
          const bg = (it.thumb || it.url || '').trim();
          if(bg) div.style.backgroundImage = `url('${bg}')`;
          card.appendChild(div);
        }

        const content = document.createElement('div');
        content.className = 'content';
        const title = document.createElement('div');
        title.className = 'title';
        title.textContent = it.title || (it.type === 'vehicule' ? 'Véhicule' : (it.type === 'video' ? 'Vidéo' : 'Photo'));
        content.appendChild(title);
        card.appendChild(content);
        grid.appendChild(card);
      }
    }

    function selectFilter(type){
      currentFilter = type;
      document.querySelectorAll('.chip').forEach(ch => {
        ch.setAttribute('aria-selected', ch.dataset.filter === type ? 'true' : 'false');
      });
      render();
    }


    document.addEventListener('DOMContentLoaded', () => {
      loadItems();
      ensureSeedItem();
      ensureSeedTitle();
      render();
      document.querySelectorAll('.chip').forEach(ch => ch.addEventListener('click', () => selectFilter(ch.dataset.filter)));
    });
  </script>
</body>
</html>
